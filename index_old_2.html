<html>
	<head>
		<title>Personalization Framework</title>
		<style>
			*{margin:0;padding:0;background:white;}
			body{overflow:hidden;}
			form{
			  position:absolute;
			  bottom:0;
			  left:0;
			  right:0;
			  background:#efefef;
			  padding:1em;
			  text-align:center;
			}	
			canvas { display: block; }
		</style>
		<script src="scripts/jquery-3.5.1.min.js"></script>
	</head>
	<body style="font-family: Century Gothic, sans-serif;" onload="">
		<div style="position:absolute;background-color:#D3D3D3;border:1px solid grey;height:100%;width:30%;">
			<!--<div style="float:left;text-align:center;font-size:15px;background-color:#D3D3D3;">
				<div style="width:29%;height:100% !important;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;">Pricing alone</div>
				<div style="width:12%;height:100%;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;"><input type="range" style="width:100%;" min="1" max="2" value="1" onchange="changeBase(this);"></div>
				<div style="width:29%;height:100%;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;word-wrap: break-word;">Pricing & personalization</div>
			</div>-->
			<div>
				<div style="width:90%;float:left;text-align:center;padding:5%;font-size:16px;background-color:#D3D3D3;font-weight:bold;text-decoration: underline;">IBS Personalization Maturity Assessment Model</div>
			</div>			
			<div>
				<div style="width:59%;float:left;text-align:left;padding:5%;font-size:15px;background-color:#D3D3D3;">Total Revenue Potential</div>
				<div style="width:21%;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;">
					<input type="checkbox" id="potential" onchange="drawSkeleton();"/>&nbsp;
				</div>
			</div>
			<div>
				<div style="width:59%;float:left;text-align:left;padding:5%;font-size:15px;background-color:#D3D3D3;">Pricing Alone</div>
				<div style="width:21%;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;">
					<input type="radio" id="pricing" name="personalizationLevel" value="pricing" onchange="">&nbsp;
				</div>
			</div>
			<div>
				<div style="width:59%;float:left;text-align:left;padding:5%;font-size:15px;background-color:#D3D3D3;">Pricing & personalization</div>
				<div style="width:21%;float:left;text-align:center;padding:5%;font-size:15px;background-color:#D3D3D3;">
					<input type="radio" id="personalization" name="personalizationLevel" value="personalization" onchange="">&nbsp;
				</div>
			</div>
			<div style="width:98%;float:left;text-align:left;padding:1%;font-size:15px;background-color:#D3D3D3;">&nbsp;</div>
			<div>
				<table cellspacing="1" cellpadding="1" border="1" width="100%" height="200">
					<tr>
						<td style="background-color:#0A0A0A !important;color:#FFFFFF;font-weight:bold;padding:5px;">Channel</td>
						<td style="background-color:#0A0A0A !important;color:#FFFFFF;font-weight:bold;padding:5px;">Segmentation</td>
						<td style="background-color:#0A0A0A !important;color:#FFFFFF;font-weight:bold;padding:5px;">Optimization</td>
					</tr>
					<tr>
						<td style="background-color:#173F5F !important;color:#FFFFFF;padding:5px;">Mobile</td>
						<td>
							<select name="series1x" id="series1x" onchange="drawSeries1()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">Mass</option>
							  <option value="2">Macro</option>
							  <option value="3">Micro</option>
							  <option value="4">Person Minimal</option>
							  <option value="5">Person Full</option>
							</select>			
						</td>
						<td>
							<select name="series1y" id="series1y" onchange="drawSeries1()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">None</option>
							  <option value="2">Analytics</option>
							  <option value="3">Feedback</option>
							  <option value="4">Reinforcement</option>
							  <option value="5">Click Stream</option>
							</select>				
						</td>
					</tr>
					<tr>
						<td style="background-color:#20639B !important;color:#FFFFFF;padding:5px;">Direct</td>
						<td>
							<select name="series2x" id="series2x" onchange="drawSeries2()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">Mass</option>
							  <option value="2">Macro</option>
							  <option value="3">Micro</option>
							  <option value="4">Person Minimal</option>
							  <option value="5">Person Full</option>
							</select>			
						</td>
						<td>
							<select name="series2y" id="series2y" onchange="drawSeries2()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">None</option>
							  <option value="2">Analytics</option>
							  <option value="3">Feedback</option>
							  <option value="4">Reinforcement</option>
							  <option value="5">Click Stream</option>
							</select>				
						</td>
					</tr>
					<tr>
						<td style="background-color:#3CAEA3 !important;color:#FFFFFF;padding:5px;">Customer Care</td>
						<td>
							<select name="series3x" id="series3x" onchange="drawSeries3()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">Mass</option>
							  <option value="2">Macro</option>
							  <option value="3">Micro</option>
							  <option value="4">Person Minimal</option>
							  <option value="5">Person Full</option>
							</select>				
						</td>
						<td>
							<select name="series3y" id="series3y" onchange="drawSeries3()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">None</option>
							  <option value="2">Analytics</option>
							  <option value="3">Feedback</option>
							  <option value="4">Reinforcement</option>
							  <option value="5">Click Stream</option>
							</select>				
						</td>
					</tr>
					<tr>
						<td style="background-color:#F6D55C !important;color:#FFFFFF;padding:5px;">Indirect</td>
						<td>
							<select name="series4x" id="series4x" onchange="drawSeries4()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">Mass</option>
							  <option value="2">Macro</option>
							  <option value="3">Micro</option>
							  <option value="4">Person Minimal</option>
							  <option value="5">Person Full</option>
							</select>				
						</td>
						<td>
							<select name="series4y" id="series4y" onchange="drawSeries4()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">None</option>
							  <option value="2">Analytics</option>
							  <option value="3">Feedback</option>
							  <option value="4">Reinforcement</option>
							  <option value="5">Click Stream</option>
							</select>	
						</td>
					</tr>	
					<tr>
						<td style="background-color:#ED553B !important;color:#FFFFFF;padding:5px;">Others</td>
						<td>
							<select name="series5x" id="series5x" onchange="drawSeries5()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">Mass</option>
							  <option value="2">Macro</option>
							  <option value="3">Micro</option>
							  <option value="4">Person Minimal</option>
							  <option value="5">Person Full</option>
							</select>	
						</td>
						<td>
							<select name="series5y" id="series5y" onchange="drawSeries5()" style="width:100%;height:100%;font-family: Century Gothic, sans-serif;">
							  <option value="1">None</option>
							  <option value="2">Analytics</option>
							  <option value="3">Feedback</option>
							  <option value="4">Reinforcement</option>
							  <option value="5">Click Stream</option>
							</select>			
						</td>
					</tr>	
				</table>
			</div>
			<div style="width:98%;float:left;text-align:left;padding:1%;font-size:15px;background-color:#D3D3D3;">&nbsp;</div>
			<div>
				<div style="width:50%;float:left;text-align:left;padding:5%;font-size:30px;background-color:#D3D3D3;">Your score:</div>
				<div id="percentagePlaceHolder" style="text-align:right;padding:5%;width:29.9%;float:left;font-weight:bold;font-size:30px;background-color:#D3D3D3;"></div>
			</div>
		</div>

		<script src="scripts/three.js"></script>
		<script src="scripts/TrackballControls.js"></script>
		
		<script>
			var base = 1;
			var three = THREE;
			var mouse = new THREE.Vector2();
			var scene = new three.Scene();
			scene.background = new THREE.Color( 0xffffff );
			
			var camera = new three.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 1000);
			var renderer = new three.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);
			//renderer.setSize(document.getElementById("renderdiv").offsetWidth,document.getElementById("renderdiv").offsetHeight);
			/*renderer.setViewport(window.innerWidth-document.getElementById("renderdiv").offsetWidth,
									window.innerHeight-document.getElementById("renderdiv").offsetHeight,
									document.getElementById("renderdiv").offsetWidth,
									document.getElementById("renderdiv").offsetHeight);*/
			document.body.appendChild(renderer.domElement);

			camera.position.z = 20;
			camera.position.x = 20;
			camera.position.y = 20;			
			
		
			var controls = new THREE.TrackballControls( camera, renderer.domElement );
			controls.rotateSpeed = 1.0;
			controls.zoomSpeed = 1.2;
			controls.panSpeed = 0.9;
			controls.noZoom = false;
			controls.maxDistance = 25;
			controls.minDistance = 3;
			controls.noPan = false;
			controls.staticMoving = false;
			controls.dynamicDampingFactor = 0.1;
			
			renderer.domElement.addEventListener( 'mousemove', onMouseMove );
			
			function changeBase(obj){
				base = obj.value==2?1.5:1;
				//drawAxes();
				drawSeries1();drawSeries2();drawSeries3();drawSeries4();drawSeries5();
			}
		
			var axesLines;
			function drawAxes(){
				scene.remove(axesLines);
				var lineMaterial = new THREE.LineBasicMaterial( { color: 0x808080 } );
				var points = [];
				points.push( new THREE.Vector3( -(base/2), -(base/2), -(base/2) ) );
				points.push( new THREE.Vector3( -(base/2), base*6, -(base/2) ) );
				points.push( new THREE.Vector3( -(base/2), -(base/2), -(base/2) ) );
				points.push( new THREE.Vector3( base*6, -(base/2), -(base/2) ) );	
				points.push( new THREE.Vector3( -(base/2), -(base/2), -(base/2) ) );
				points.push( new THREE.Vector3( -(base/2), -(base/2), base*6 ) );			
				
				var lineGeometryy = new THREE.BufferGeometry().setFromPoints( points );
				axesLines = new THREE.Line( lineGeometryy, lineMaterial );
				scene.add( axesLines );			
			}
		
			function calculatePercentage(){
				var seriesACubes = document.getElementById("series1x").value * document.getElementById("series1y").value;
				var seriesBCubes = document.getElementById("series2x").value * document.getElementById("series2y").value;
				var seriesCCubes = document.getElementById("series3x").value * document.getElementById("series3y").value;
				var seriesDCubes = document.getElementById("series4x").value * document.getElementById("series4y").value;
				var seriesECubes = document.getElementById("series5x").value * document.getElementById("series5y").value;
				var totalPercent = ((seriesACubes + seriesBCubes + seriesCCubes + seriesDCubes + seriesECubes)/125)*100;
				document.getElementById("percentagePlaceHolder").innerText = Math.round((totalPercent + Number.EPSILON) * 100)/100 + "%";
				//alert(totalPercent);
			}

			function createBlock(x,y,z,geo,mat){
				var cube = new THREE.Mesh( geo, mat );
				cube.position.set( x, y, z );
				var cubeGeo = new THREE.EdgesGeometry( cube.geometry ); // or WireframeGeometry
				var cubeMat = new THREE.LineBasicMaterial( { color: 0xffffff, linewidth: 2 } );
				var wireframe = new THREE.LineSegments( cubeGeo, cubeMat );
				cube.add( wireframe );
				return cube;				
			}
			
			function createFrameBlock(x,y,z,geo,mat){
				var cube = new THREE.Mesh( geo, mat );
				cube.position.set( x, y, z );
				var cubeGeo = new THREE.EdgesGeometry( cube.geometry ); // or WireframeGeometry
				var cubeMat = new THREE.LineBasicMaterial( { color: 0xdcdcdc, linewidth: 1 } );
				var wireframe = new THREE.LineSegments( cubeGeo, cubeMat );
				cube.add( wireframe );
				return cube;				
			}
			

			
			var groupSeriesFrame = new THREE.Group();
			var masterCubeFrame = new THREE.Group();
			var groupSeries1 = new THREE.Group();
			var groupSeries2 = new THREE.Group();
			var groupSeries3 = new THREE.Group();
			var groupSeries4 = new THREE.Group();
			var groupSeries5 = new THREE.Group();
			
			function drawSkeleton(){
				scene.remove(groupSeriesFrame);
				if(document.getElementById("potential").checked){
					groupSeriesFrame = new THREE.Group();
					base = 1.5;
					var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
					var material = new THREE.MeshBasicMaterial( {color: 0xffffff, transparent:true, opacity:0.01} );				
					
					var layera1 =[[0,0,0],[0,0,1*base],[0,0,2*base],[0,0,3*base],[0,0,4*base]];
					var layera2 =[[0,1*base,0],[0,1*base,1*base],[0,1*base,2*base],[0,1*base,3*base],[0,1*base,4*base]];
					var layera3 =[[0,2*base,0],[0,2*base,1*base],[0,2*base,2*base],[0,2*base,3*base],[0,2*base,4*base]];
					var layera4 =[[0,3*base,0],[0,3*base,1*base],[0,3*base,2*base],[0,3*base,3*base],[0,3*base,4*base]];
					var layera5 =[[0,4*base,0],[0,4*base,1*base],[0,4*base,2*base],[0,4*base,3*base],[0,4*base,4*base]];
					
					var layerb1 =[[1*base,0,0],[1*base,0,1*base],[1*base,0,2*base],[1*base,0,3*base],[1*base,0,4*base]];
					var layerb2 =[[1*base,1*base,0],[1*base,1*base,1*base],[1*base,1*base,2*base],[1*base,1*base,3*base],[1*base,1*base,4*base]];
					var layerb3 =[[1*base,2*base,0],[1*base,2*base,1*base],[1*base,2*base,2*base],[1*base,2*base,3*base],[1*base,2*base,4*base]];
					var layerb4 =[[1*base,3*base,0],[1*base,3*base,1*base],[1*base,3*base,2*base],[1*base,3*base,3*base],[1*base,3*base,4*base]];
					var layerb5 =[[1*base,4*base,0],[1*base,4*base,1*base],[1*base,4*base,2*base],[1*base,4*base,3*base],[1*base,4*base,4*base]];

					var layerc1 =[[2*base,0,0],[2*base,0,1*base],[2*base,0,2*base],[2*base,0,3*base],[2*base,0,4*base]];
					var layerc2 =[[2*base,1*base,0],[2*base,1*base,1*base],[2*base,1*base,2*base],[2*base,1*base,3*base],[2*base,1*base,4*base]];
					var layerc3 =[[2*base,2*base,0],[2*base,2*base,1*base],[2*base,2*base,2*base],[2*base,2*base,3*base],[2*base,2*base,4*base]];
					var layerc4 =[[2*base,3*base,0],[2*base,3*base,1*base],[2*base,3*base,2*base],[2*base,3*base,3*base],[2*base,3*base,4*base]];
					var layerc5 =[[2*base,4*base,0],[2*base,4*base,1*base],[2*base,4*base,2*base],[2*base,4*base,3*base],[2*base,4*base,4*base]];				

					var layerd1 =[[3*base,0,0],[3*base,0,1*base],[3*base,0,2*base],[3*base,0,3*base],[3*base,0,4*base]];
					var layerd2 =[[3*base,1*base,0],[3*base,1*base,1*base],[3*base,1*base,2*base],[3*base,1*base,3*base],[3*base,1*base,4*base]];
					var layerd3 =[[3*base,2*base,0],[3*base,2*base,1*base],[3*base,2*base,2*base],[3*base,2*base,3*base],[3*base,2*base,4*base]];
					var layerd4 =[[3*base,3*base,0],[3*base,3*base,1*base],[3*base,3*base,2*base],[3*base,3*base,3*base],[3*base,3*base,4*base]];
					var layerd5 =[[3*base,4*base,0],[3*base,4*base,1*base],[3*base,4*base,2*base],[3*base,4*base,3*base],[3*base,4*base,4*base]];

					var layere1 =[[4*base,0,0],[4*base,0,1*base],[4*base,0,2*base],[4*base,0,3*base],[4*base,0,4*base]];
					var layere2 =[[4*base,1*base,0],[4*base,1*base,1*base],[4*base,1*base,2*base],[4*base,1*base,3*base],[4*base,1*base,4*base]];
					var layere3 =[[4*base,2*base,0],[4*base,2*base,1*base],[4*base,2*base,2*base],[4*base,2*base,3*base],[4*base,2*base,4*base]];
					var layere4 =[[4*base,3*base,0],[4*base,3*base,1*base],[4*base,3*base,2*base],[4*base,3*base,3*base],[4*base,3*base,4*base]];
					var layere5 =[[4*base,4*base,0],[4*base,4*base,1*base],[4*base,4*base,2*base],[4*base,4*base,3*base],[4*base,4*base,4*base]];				
					
					var layers = [layera1,layera2,layera3,layera4,layera5,
								layerb1,layerb2,layerb3,layerb4,layerb5,
								layerc1,layerc2,layerc3,layerc4,layerc5,
								layerd1,layerd2,layerd3,layerd4,layerd5,
								layere1,layere2,layere3,layere4,layere5];
					
					for(var i=0;i<=(24);i++){
						var currentLayer = layers[i];
						for(var j=0;j<=(4);j++){
							groupSeriesFrame.add(createFrameBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
						}
					}
					scene.add(groupSeriesFrame);
					base = 1;
				}					
			}			

			function drawMasterCube(){
				scene.remove(masterCubeFrame);
				masterCubeFrame = new THREE.Group();
				var geometry = new THREE.BoxBufferGeometry( 5, 5, 5 );
				var material = new THREE.MeshBasicMaterial( {color: 0xffffff, wireframe:true, opacity:0.01} );				
				masterCubeFrame.add(createFrameBlock(2,2,2,geometry,material));
				scene.add(masterCubeFrame);			
			}	
			
			function drawSeries1(){
				
				scene.remove(groupSeries1);
				groupSeries1 = new THREE.Group();
				var x = document.getElementById("series1x").value;
				var y = document.getElementById("series1y").value;
				var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
				var material = new THREE.MeshBasicMaterial( {color: 0x173F5F, transparent:true, opacity:0.9} );				
				
				var layer1 =[[0,0,0],[0,0,1*base],[0,0,2*base],[0,0,3*base],[0,0,4*base]];
				var layer2 =[[0,1*base,0],[0,1*base,1*base],[0,1*base,2*base],[0,1*base,3*base],[0,1*base,4*base]];
				var layer3 =[[0,2*base,0],[0,2*base,1*base],[0,2*base,2*base],[0,2*base,3*base],[0,2*base,4*base]];
				var layer4 =[[0,3*base,0],[0,3*base,1*base],[0,3*base,2*base],[0,3*base,3*base],[0,3*base,4*base]];
				var layer5 =[[0,4*base,0],[0,4*base,1*base],[0,4*base,2*base],[0,4*base,3*base],[0,4*base,4*base]];
				var layers = [layer1,layer2,layer3,layer4,layer5];
				
				for(var i=0;i<=(y-1);i++){
					var currentLayer = layers[i];
					for(var j=0;j<=(x-1);j++){
						groupSeries1.add(createBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
					}
				}
				scene.add(groupSeries1);
				calculatePercentage();
			}

			function drawSeries2(){
				
				scene.remove(groupSeries2);
				groupSeries2 = new THREE.Group();
				var x = document.getElementById("series2x").value;
				var y = document.getElementById("series2y").value;
				var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
				var material = new THREE.MeshBasicMaterial( {color: 0x20639B, transparent:true, opacity:0.9} );				
				
				var layer1 =[[1*base,0,0],[1*base,0,1*base],[1*base,0,2*base],[1*base,0,3*base],[1*base,0,4*base]];
				var layer2 =[[1*base,1*base,0],[1*base,1*base,1*base],[1*base,1*base,2*base],[1*base,1*base,3*base],[1*base,1*base,4*base]];
				var layer3 =[[1*base,2*base,0],[1*base,2*base,1*base],[1*base,2*base,2*base],[1*base,2*base,3*base],[1*base,2*base,4*base]];
				var layer4 =[[1*base,3*base,0],[1*base,3*base,1*base],[1*base,3*base,2*base],[1*base,3*base,3*base],[1*base,3*base,4*base]];
				var layer5 =[[1*base,4*base,0],[1*base,4*base,1*base],[1*base,4*base,2*base],[1*base,4*base,3*base],[1*base,4*base,4*base]];
				var layers = [layer1,layer2,layer3,layer4,layer5];
				
				for(var i=0;i<=(y-1);i++){
					var currentLayer = layers[i];
					for(var j=0;j<=(x-1);j++){
						groupSeries2.add(createBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
					}
				}
				scene.add(groupSeries2);
				calculatePercentage();
			}

			function drawSeries3(){
				
				scene.remove(groupSeries3);
				groupSeries3 = new THREE.Group();
				var x = document.getElementById("series3x").value;
				var y = document.getElementById("series3y").value;
				var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
				var material = new THREE.MeshBasicMaterial( {color: 0x3CAEA3, transparent:true, opacity:0.9} );				
				
				var layer1 =[[2*base,0,0],[2*base,0,1*base],[2*base,0,2*base],[2*base,0,3*base],[2*base,0,4*base]];
				var layer2 =[[2*base,1*base,0],[2*base,1*base,1*base],[2*base,1*base,2*base],[2*base,1*base,3*base],[2*base,1*base,4*base]];
				var layer3 =[[2*base,2*base,0],[2*base,2*base,1*base],[2*base,2*base,2*base],[2*base,2*base,3*base],[2*base,2*base,4*base]];
				var layer4 =[[2*base,3*base,0],[2*base,3*base,1*base],[2*base,3*base,2*base],[2*base,3*base,3*base],[2*base,3*base,4*base]];
				var layer5 =[[2*base,4*base,0],[2*base,4*base,1*base],[2*base,4*base,2*base],[2*base,4*base,3*base],[2*base,4*base,4*base]];
				var layers = [layer1,layer2,layer3,layer4,layer5];
				
				for(var i=0;i<=(y-1);i++){
					var currentLayer = layers[i];
					for(var j=0;j<=(x-1);j++){
						groupSeries3.add(createBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
					}
				}
				scene.add(groupSeries3);
				calculatePercentage();
			}

			function drawSeries4(){
				
				scene.remove(groupSeries4);
				groupSeries4 = new THREE.Group();
				var x = document.getElementById("series4x").value;
				var y = document.getElementById("series4y").value;
				var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
				var material = new THREE.MeshBasicMaterial( {color: 0xF6D55C, transparent:true, opacity:0.9} );				
				
				var layer1 =[[3*base,0,0],[3*base,0,1*base],[3*base,0,2*base],[3*base,0,3*base],[3*base,0,4*base]];
				var layer2 =[[3*base,1*base,0],[3*base,1*base,1*base],[3*base,1*base,2*base],[3*base,1*base,3*base],[3*base,1*base,4*base]];
				var layer3 =[[3*base,2*base,0],[3*base,2*base,1*base],[3*base,2*base,2*base],[3*base,2*base,3*base],[3*base,2*base,4*base]];
				var layer4 =[[3*base,3*base,0],[3*base,3*base,1*base],[3*base,3*base,2*base],[3*base,3*base,3*base],[3*base,3*base,4*base]];
				var layer5 =[[3*base,4*base,0],[3*base,4*base,1*base],[3*base,4*base,2*base],[3*base,4*base,3*base],[3*base,4*base,4*base]];
				var layers = [layer1,layer2,layer3,layer4,layer5];
				
				for(var i=0;i<=(y-1);i++){
					var currentLayer = layers[i];
					for(var j=0;j<=(x-1);j++){
						groupSeries4.add(createBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
					}
				}
				scene.add(groupSeries4);
				calculatePercentage();
			}

			function drawSeries5(){
				
				scene.remove(groupSeries5);
				groupSeries5 = new THREE.Group();
				var x = document.getElementById("series5x").value;
				var y = document.getElementById("series5y").value;
				var geometry = new THREE.BoxBufferGeometry( 1*base, 1*base, 1*base );
				var material = new THREE.MeshBasicMaterial( {color: 0xED553B, transparent:true, opacity:0.9} );				
				
				var layer1 =[[4*base,0,0],[4*base,0,1*base],[4*base,0,2*base],[4*base,0,3*base],[4*base,0,4*base]];
				var layer2 =[[4*base,1*base,0],[4*base,1*base,1*base],[4*base,1*base,2*base],[4*base,1*base,3*base],[4*base,1*base,4*base]];
				var layer3 =[[4*base,2*base,0],[4*base,2*base,1*base],[4*base,2*base,2*base],[4*base,2*base,3*base],[4*base,2*base,4*base]];
				var layer4 =[[4*base,3*base,0],[4*base,3*base,1*base],[4*base,3*base,2*base],[4*base,3*base,3*base],[4*base,3*base,4*base]];
				var layer5 =[[4*base,4*base,0],[4*base,4*base,1*base],[4*base,4*base,2*base],[4*base,4*base,3*base],[4*base,4*base,4*base]];
				var layers = [layer1,layer2,layer3,layer4,layer5];
				
				for(var i=0;i<=(y-1);i++){
					var currentLayer = layers[i];
					for(var j=0;j<=(x-1);j++){
						groupSeries5.add(createBlock(currentLayer[j][0],currentLayer[j][1],currentLayer[j][2],geometry,material));
					}
				}
				scene.add(groupSeries5);
				calculatePercentage();
			}
			
			function onMouseMove( e ) {

				mouse.x = e.clientX;
				mouse.y = e.clientY;

			}
			
			// shim layer with setTimeout fallback
			window.requestAnimFrame = (function(){
				return  window.requestAnimationFrame ||
					window.webkitRequestAnimationFrame ||
					window.mozRequestAnimationFrame ||
					function(callback) {
						window.setTimeout(callback, 1000 / 60);
					};
			})();
			//drawAxes();
			function render() {
				controls.update();
				renderer.render(scene, camera);
				requestAnimFrame(render);
			}			
			render();
		
		
		</script>
		
	</body>
</html>